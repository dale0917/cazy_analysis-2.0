nextflow_process {

    name "Test Process RSEM_PREPAREREFERENCE"
    script "modules/local/preparereference.nf"
    process "RSEM_PREPAREREFERENCE"

    test("Should run without failures") {

        when {
            params {
                // define parameters here. Example:
                // outdir = "tests/results"
            }
            process {
                """
                input[0] = Channel.of([
                    [ id:'test_fasta' ],
                    [ file('/workspace/nf-test/nf-test/assets/Saccharomyces_cerevisiae.R64-1-1.dna.toplevel.fa', checkIfExists: true) ]
                ])
                input[1] = Channel.of([
                    [ id:'test_gtf' ],
                    [ file('/workspace/nf-test/nf-test/assets/Saccharomyces_cerevisiae.R64-1-1.113.gtf', checkIfExists: true) ]
                ])
                """
            }
        }

        then {
            assert process.success
            assert snapshot(process.out).match()
        }

    }

}
